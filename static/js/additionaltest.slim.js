timer1="";function sleep(waitMsec){var startMsec=new Date();while(new Date()-startMsec<waitMsec);} var $scrollY=0;function autoScroll(){const spinner=document.getElementById('loading');var $sampleBox=document.getElementById("scroll-box");$sampleBox.scrollTop=++$scrollY;$sampleBox.scrollTop=$sampleBox.scrollHeight;if($scrollY<$sampleBox.scrollHeight-$sampleBox.clientHeight){$scrolly=$sampleBox.scrollHeight-$sampleBox.clientHeight;console.log($sampleBox.scrollHeight-$sampleBox.clientHeight);console.log($scrollY);spinner.classList.add('loaded');console.log("Finish");return;setTimeout("autoScroll()",1)}else if($scrollY==$sampleBox.scrollHeight-$sampleBox.clientHeight){spinner.classList.add('loaded');return}else{$scrollY=0;$sampleBox.scrollTop=0;setTimeout("autoScroll()",1)}} function addmessageclick(){let textmessage=document.getElementById("textmessage").value;if(textmessage.length==0){return} let senduser=document.getElementById("sendusername1").className;var postdata={"addchattext":textmessage,"senduser":senduser};$.ajax({type:"POST",url:"addchattext.php",data:postdata,success:function(data){messagedisplay(senduser)},error:function(){alert("error")}});var myh3=document.getElementById("inputarea");myh3.innerHTML=`<!-- テキストエリア --> <!--Textarea with icon prefix--> <textarea id="textmessage" class="md-textarea form-control col-md-10 col-9 mb-3" rows="1" style="max-height:170px;border-radius:2vw;resize: none;"></textarea> <a onclick="addmessageclick()"><i class="fas fa-paper-plane fa-2x col-md-2 col-3 mt-1 text-primary"></i></a> <!--<label for="form22">メッセージを入力</label>--> `;return!1} function messagelist(){var postdata2={"messagelist":"OK"};const spinner=document.getElementById('loading');spinner.classList.add('loaded');$.ajax({type:"POST",url:"messagelist.php",data:postdata2,success:function(data){var myh2=document.getElementById("messagelist");myh2.innerHTML=data},error:function(){alert("error2")}});console.log("OK3");return!1} function bookmarklist(){var postdata2={"bookmarklist":"OK"};const spinner=document.getElementById('loading');spinner.classList.add('loaded');$.ajax({type:"POST",url:"bookmarklist.php",data:postdata2,success:function(data){var myh2=document.getElementById("bookmarklist");myh2.innerHTML=data},error:function(){alert("error2")}});console.log("OK3");return!1} function messagedisplay(senduser){var postdata={"getmessage":senduser};const spinner=document.getElementById('loading');spinner.classList.add('loaded');$.ajax({type:"POST",url:"getchatmessage.php",data:postdata,success:function(data){var myh2=document.getElementById("scroll-box");myh2.innerHTML=data;var myh3=document.getElementById("headersenduser");myh3.innerHTML=senduser;autoScroll();$(function(){var $textarea=$('#textmessage');var lineHeight=parseInt($textarea.css('lineHeight'));$textarea.on('input',function(e){var lines=($(this).val()+'\n').match(/\n/g).length;$(this).height(lineHeight*lines)})})},error:function(){alert("error")}});console.log("OK1");return!1} function apply(){let senduser=document.getElementById("senduser-name").textContent;let textmessage=senduser+"に申し込みが完了しました。メッセージがくるまでしばらくお待ちください。";var postdata={"applydata":"applydata","senduser":senduser,"textmessage":textmessage} console.log(postdata);$.ajax({type:"POST",url:"apply.php",data:postdata,success:function(data){alert("申し込みが完了しました。")},error:function(){alert("error")}});return!1} function deletemessage(classdate){console.log(classdate);let senduser=document.getElementById("sendusername1").className;var postdata={"classdate":classdate};const spinner=document.getElementById('loading');spinner.classList.add('loaded');$.ajax({type:"POST",url:"deletemessage.php",data:postdata,success:function(data){messagedisplay(senduser)},error:function(){alert("error")}});console.log("OK1");return!1} function messagerenew(){let senduser=document.getElementById("sendusername1").className;messagedisplay(senduser);return} function profilechangeclick(){let name=document.getElementById("name").value;let phonenumber=document.getElementById("phonenumber").value;let university=document.getElementById("university").value;let undergraduate=document.getElementById("undergraduate").value;let department=document.getElementById("department").value;let graduateyear=document.getElementById("graduateyear").value;let schoolyear=document.getElementById("schoolyear").value;let selfappeal=document.getElementById("selfappeal").value;let areaofinterest=document.getElementById("areaofinterest").value;let clubinhighschool=document.getElementById("clubinhighschool").value;let currentactivity=document.getElementById("currentactivity").value;var postdata={"profiledata":"profiledata","name":name,"phonenumber":phonenumber,"university":university,"undergraduate":undergraduate,"department":department,"graduateyear":graduateyear,"schoolyear":schoolyear,"selfappeal":selfappeal,"areaofinterest":areaofinterest,"clubinhighschool":clubinhighschool,"currentactivity":currentactivity};$.ajax({type:"POST",url:"profilechange.php",data:postdata,success:function(data){console.log(data)},error:function(){alert("error")}});return!1} function applyclick(){$('#applymodal').on('show.bs.modal',function(event){var button=$(event.relatedTarget);var senduserName=button.data('senduser');var modal=$(this);modal.find('.senduser-name').text(senduserName)})}
